<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>ManagedService (OSGi Compendium Release 8)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.osgi.service.cm, interface: ManagedService">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language"><b>OSGi&reg; Compendium</b><br/>Release 8</div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/ManagedService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.osgi.service.cm</a></div>
<h1 title="Interface ManagedService" class="title">Interface ManagedService</h1>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="annotations">@ConsumerType
</span><span class="modifiers">public interface </span><span class="element-name type-name-label">ManagedService</span></div>
<div class="block">A service that can receive configuration data from a Configuration Admin
 service.
 <p>
 A Managed Service is a service that needs configuration data. Such an object
 should be registered with the Framework registry with the <code>service.pid</code>
 property set to some unique identifier called a PID.
 <p>
 If the Configuration Admin service has a <code>Configuration</code> object
 corresponding to this PID, it will callback the <code>updated()</code> method of
 the <code>ManagedService</code> object, passing the properties of that
 <code>Configuration</code> object.
 <p>
 If it has no such <code>Configuration</code> object, then it calls back with a
 <code>null</code> properties argument. Registering a Managed Service will always
 result in a callback to the <code>updated()</code> method provided the
 Configuration Admin service is, or becomes active. This callback must always
 be done asynchronously.
 <p>
 Else, every time that either of the <code>updated()</code> methods is called on
 that <code>Configuration</code> object, the <code>ManagedService.updated()</code>
 method with the new properties is called. If the <code>delete()</code> method is
 called on that <code>Configuration</code> object, <code>ManagedService.updated()</code>
 is called with a <code>null</code> for the properties parameter. All these
 callbacks must be done asynchronously.
 <p>
 The following example shows the code of a serial port that will create a port
 depending on configuration information.

 <pre>

   class SerialPort implements ManagedService {

     ServiceRegistration registration;
     Hashtable configuration;
     CommPortIdentifier id;

     synchronized void open(CommPortIdentifier id,
     BundleContext context) {
       this.id = id;
       registration = context.registerService(
         ManagedService.class.getName(),
         this,
         getDefaults()
       );
     }

     Hashtable getDefaults() {
       Hashtable defaults = new Hashtable();
       defaults.put( &quot;port&quot;, id.getName() );
       defaults.put( &quot;product&quot;, &quot;unknown&quot; );
       defaults.put( &quot;baud&quot;, &quot;9600&quot; );
       defaults.put( Constants.SERVICE_PID,
         &quot;com.acme.serialport.&quot; + id.getName() );
       return defaults;
     }

     public synchronized void updated(
       Dictionary configuration  ) {
       if ( configuration == null )
         registration.setProperties( getDefaults() );
       else {
         setSpeed( configuration.get(&quot;baud&quot;) );
         registration.setProperties( configuration );
       }
     }
     ...
   }
 </pre>
 <p>
 As a convention, it is recommended that when a Managed Service is updated, it
 should copy all the properties it does not recognize into the service
 registration properties. This will allow the Configuration Admin service to
 set properties on services which can then be used by other applications.
 <p>
 Normally, a single Managed Service for a given PID is given the configuration
 dictionary, this is the configuration that is bound to the location of the
 registering bundle. However, when security is on, a Managed Service can have
 Configuration Permission to also be updated for other locations.
 <p>
 If a Managed Service is registered without the <code>service.pid</code> property,
 it will be ignored.</div>
<dl class="notes">
<dt>"ThreadSafe"</dt>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#updated(java.util.Dictionary)" class="member-name-link">updated</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Dictionary.html" title="class or interface in java.util" class="external-link">Dictionary</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr>?&gt;&nbsp;properties)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Update the configuration for a Managed Service.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="updated(java.util.Dictionary)">
<h3>updated</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">updated</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Dictionary.html" title="class or interface in java.util" class="external-link">Dictionary</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr>?&gt;&nbsp;properties)</span>
      throws <span class="exceptions"><a href="ConfigurationException.html" title="class in org.osgi.service.cm">ConfigurationException</a></span></div>
<div class="block">Update the configuration for a Managed Service.

 <p>
 When the implementation of <code>updated(Dictionary)</code> detects any kind
 of error in the configuration properties, it should create a new
 <code>ConfigurationException</code> which describes the problem. This can
 allow a management system to provide useful information to a human
 administrator.

 <p>
 If this method throws any other <code>Exception</code>, the Configuration
 Admin service must catch it and should log it.
 <p>
 The Configuration Admin service must call this method asynchronously with
 the method that initiated the callback. This implies that implementors of
 Managed Service can be assured that the callback will not take place
 during registration when they execute the registration in a synchronized
 method.

 <p>
 If the location allows multiple managed services to be called back for a
 single configuration then the callbacks must occur in service ranking
 order. Changes in the location must be reflected by deleting the
 configuration if the configuration is no longer visible and updating when
 it becomes visible.

 <p>
 If no configuration exists for the corresponding PID, or the bundle has
 no access to the configuration, then the bundle must be called back with
 a <code>null</code> to signal that CM is active but there is no data.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>properties</code> - A copy of the Configuration properties, or <code>null</code>
        . This argument must not contain the "service.bundleLocation"
        property. The value of this property may be obtained from the
        <code>Configuration.getBundleLocation</code> method.</dd>
<dt>Throws:</dt>
<dd><code><a href="ConfigurationException.html" title="class in org.osgi.service.cm">ConfigurationException</a></code> - when the update fails</dd>
<dt>"Required Permissions"</dt>
<dd>ConfigurationPermission[c.location,TARGET] Required by the
           bundle that registered this service</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &copy; Contributors to the Eclipse Foundation Licensed under the <a href="https://www.eclipse.org/legal/efsl.php" target="_blank">Eclipse Foundation Specification License – v1.0</a></small></p>
</footer>
</div>
</div>
</body>
</html>
